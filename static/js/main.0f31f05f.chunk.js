(this.webpackJsonpvisualizer=this.webpackJsonpvisualizer||[]).push([[0],{63:function(e,t,a){e.exports=a(78)},73:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),c=a(9),o=a.n(c),l=a(27),u=a(25),s=(a(73),a(108)),d=a(107);!function(e){e.SET_MUSIC="PLAYER/SET_MUSIC",e.CHANGE_VOLUME="PLAYER/CHANGE_VOLUME",e.PLAY="PLAYER/PLAY",e.STOP="PLAYER/STOP",e.PAUSE="PLAYER/PAUSE"}(n||(n={}));var m,f=function(e){return{volume:e,type:n.CHANGE_VOLUME}},h=function(){return{type:n.PLAY}},v=a(16),E=a(49),y=a(103),b=a(102),g=a(35),p=a(20),C=function(){function e(t){Object(g.a)(this,e),this.canvas=void 0,this.ctx=void 0,this.canvas=t,this.ctx=t.getContext("2d")}return Object(p.a)(e,[{key:"drawBarVisualizer",value:function(e){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.fillStyle="#ff5722";for(var t=0;t<e.length;t+=1)this.ctx.fillRect(t*(this.canvas.width/e.length),this.canvas.height-e[t],this.canvas.width/e.length-1,e[t]);this.ctx.save()}},{key:"drawCircleVisualizer",value:function(e){var t=2*Math.PI/e.length;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath();for(var a=0;a<e.length;a+=1){var n=e[a]+200+1,i=t*a+.01,r=this.canvas.width/2+200*Math.cos(i),c=this.canvas.height/2+200*Math.sin(i),o=this.canvas.width/2+n*Math.cos(i),l=this.canvas.height/2+n*Math.sin(i);this.ctx.moveTo(r,c),this.ctx.lineTo(o,l),this.ctx.lineWidth=5,this.ctx.strokeStyle="#ff5722",this.ctx.closePath()}this.ctx.stroke()}}]),e}(),x=Object(E.a)((function(){return{container:{width:"100%",height:"100vh"},canvasContainer:{position:"relative",width:"100%",height:"100%"},canvas:{position:"absolute",width:"100%",height:"100%",top:0,left:0},playButton:{position:"absolute",top:0,right:0,bottom:0,left:0,margin:"auto",width:"200px",height:"200px",borderRadius:"100%",fontSize:"2em"},file:{display:"none"}}})),O=function(e){var t=e.analyser,a=e.isPlay,n=e.mode,c=e.setMusic,o=void 0===c?function(){}:c,l=e.play,u=void 0===l?function(){}:l,s=x(),d=Object(i.useRef)(),m=Object(i.useState)(Object),f=Object(v.a)(m,2),h=f[0],E=f[1],g=Object(i.useState)((function(){return!0})),p=Object(v.a)(g,2),O=p[0],P=p[1],j=Object(i.useState)((function(){return!1})),w=Object(v.a)(j,2),A=w[0],S=w[1],k=Object(i.useCallback)((function(){if(t instanceof AnalyserNode){var e=new Uint8Array(t.frequencyBinCount);switch(t.getByteFrequencyData(e),n){case"bar":h.drawBarVisualizer(e);break;case"circle":h.drawCircleVisualizer(e)}requestAnimationFrame(k)}}),[t,h,n]);return Object(i.useEffect)((function(){var e=document.getElementById("canvasContainer"),t=document.getElementById("canvas");t.width=null===e||void 0===e?void 0:e.clientWidth,t.height=null===e||void 0===e?void 0:e.clientHeight,E(new C(t))}),[d,n]),Object(i.useEffect)((function(){a&&requestAnimationFrame(k)}),[a,k]),r.a.createElement("div",{className:s.container},r.a.createElement(b.a,{in:O,timeout:1e3},r.a.createElement(y.a,{variant:"outlined",color:"primary",className:s.playButton,onClick:function(){var e=document.getElementById("fileInput");null!==e&&e.click()}},"MUSIC",r.a.createElement("input",{id:"fileInput",className:s.file,type:"file",onChange:function(e){return function(e){if(e&&e.type.match("audio.*")){P(!1),S(!0);var t=new AudioContext,a=new FileReader;a.readAsArrayBuffer(e),a.onload=function(){a.result instanceof ArrayBuffer&&t.decodeAudioData(a.result,(function(e){o(e,t),u()}))}}}(null!==e.target.files?e.target.files[0]:null)}}))),r.a.createElement(b.a,{in:A,timeout:1e3},r.a.createElement("div",{id:"canvasContainer",className:s.canvasContainer},r.a.createElement("canvas",{id:"canvas",className:s.canvas}))))},P=Object(l.b)((function(e){return{music:e.player.music,analyser:e.player.analyser,isPlay:e.player.isPlay,mode:e.visualizer.mode}}),(function(e){return{setMusic:function(t,a){return e(function(e,t){return{buffer:e,audioCtx:t,type:n.SET_MUSIC}}(t,a))},changeVolume:function(t){return e(f(t))},play:function(){return e(h())}}}))(O);!function(e){e.CHANGE_MODE="VISUALIZER/CHANGE_MODE"}(m||(m={}));var j=a(105),w=a(109),A=a(110),S=a(111),k=a(51),M=a.n(k),N=a(52),I=a.n(N),L=a(50),B=Object(E.a)((function(){return{root:{width:200,paddingTop:7}}})),U=function(e){var t=e.changeVolume,a=e.volume,n=B(),i=r.a.useState(a),c=Object(v.a)(i,2),o=c[0],l=c[1];return r.a.createElement("div",{className:n.root},r.a.createElement(j.a,{container:!0,spacing:2},r.a.createElement(j.a,{item:!0},r.a.createElement(M.a,null)),r.a.createElement(j.a,{item:!0,xs:!0},r.a.createElement(S.a,{value:o,min:0,step:.01,max:2,onChange:function(e,a){Object(L.isNumber)(a)&&(l(a),t(a))},color:"secondary","aria-labelledby":"continuous-slider"})),r.a.createElement(j.a,{item:!0},r.a.createElement(I.a,null))))},V=a(106),z=a(53),R=a.n(z),T=function(e){var t=e.handlePlayButton;return r.a.createElement(V.a,{onClick:t,color:"inherit"},r.a.createElement(R.a,null))},_=a(54),G=a.n(_),H=function(e){var t=e.handlePauseButton;return r.a.createElement(V.a,{onClick:t,color:"inherit"},r.a.createElement(G.a,null))},Y=Object(E.a)((function(){return{root:{position:"absolute"}}})),F=function(e){var t,a=e.mode,n=e.modeList,c=e.isPlay,o=e.volume,l=e.changeMode,u=void 0===l?function(){}:l,s=e.changeVolume,d=void 0===s?function(){}:s,m=e.play,f=void 0===m?function(){}:m,h=e.pause,E=void 0===h?function(){}:h,b=Object(i.useState)((function(){return!1})),g=Object(v.a)(b,2),p=g[0],C=g[1],x=Y(),O=function(e){u(e)};return r.a.createElement("div",{className:x.root,style:{zIndex:1100}},r.a.createElement(y.a,{onClick:function(){C(!0)}},"Menu"),r.a.createElement(w.a,{anchor:"top",open:p,onClose:(t=!1,function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&C(t)})},r.a.createElement(j.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(j.a,{item:!0,xs:10},r.a.createElement(A.a,{"aria-label":"breadcrumb"},n.map((function(e){return r.a.createElement("div",{key:e},function(e,t){return r.a.createElement("div",null,e===t?r.a.createElement(y.a,{key:e,onClick:function(){return O(e)}},e):r.a.createElement(y.a,{key:e,onClick:function(){return O(e)},color:"inherit"},e))}(e,a))})))),r.a.createElement(j.a,{item:!0,xs:2},r.a.createElement(j.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:2},r.a.createElement(j.a,{item:!0,xs:2},c?r.a.createElement(H,{handlePauseButton:E}):r.a.createElement(T,{handlePlayButton:f})),r.a.createElement(j.a,{item:!0,xs:8},r.a.createElement(U,{changeVolume:d,volume:o})))))))},D=Object(l.b)((function(e){return{mode:e.visualizer.mode,modeList:e.visualizer.modeList,isPlay:e.player.isPlay,volume:e.player.volume}}),(function(e){return{changeMode:function(t){return e(function(e){return{mode:e,type:m.CHANGE_MODE}}(t))},changeVolume:function(t){return e(f(t))},play:function(){return e(h())},pause:function(){return e({type:n.PAUSE})}}}))(F),q=function(){return r.a.createElement("div",null,r.a.createElement(d.a,null),r.a.createElement("header",null,r.a.createElement(D,null)),r.a.createElement("main",null,r.a.createElement(P,null)))},W=a(18),J={audioCtx:void 0,music:void 0,analyser:void 0,gainNode:void 0,isFinishLoading:!1,isInitiallPaly:!1,isPlay:!1,volume:1},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_MUSIC:if(void 0===t.audioCtx)return e;if(void 0===t.buffer)return e;void 0!==e.music&&e.music.stop();var a=t.audioCtx.createBufferSource();a.buffer=t.buffer;var i=t.audioCtx.createAnalyser();i.fftSize=256,a.connect(i);var r=t.audioCtx.createGain();return r.gain.value=e.volume,a.connect(r),r.connect(t.audioCtx.destination),Object(W.a)({},e,{audioCtx:t.audioCtx,music:a,analyser:i,gainNode:r,isPlay:!1,isFinishLoading:!0,isInitiallPaly:!0});case n.CHANGE_VOLUME:if(void 0===t.volume)return e;if(void 0===e.gainNode)return Object(W.a)({},e,{volume:t.volume});var c=e.gainNode;return c.gain.value=t.volume,Object(W.a)({},e,{gainNode:c,volume:t.volume});case n.PLAY:return void 0===e.music?e:e.isFinishLoading?void 0===e.audioCtx?e:(e.isInitiallPaly?e.music.start(0):e.audioCtx.resume(),Object(W.a)({},e,{isPlay:!0,isInitiallPaly:!1})):e;case n.STOP:return void 0===e.music?e:void 0===e.audioCtx?e:(e.music.stop(),Object(W.a)({},e,{isPlay:!1}));case n.PAUSE:return void 0===e.music?e:void 0===e.audioCtx?e:(e.audioCtx.suspend(),Object(W.a)({},e,{isPlay:!1}));default:t.type;return e}},$={mode:"bar",modeList:["bar","circle"]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.CHANGE_MODE:return Object(W.a)({},e,{mode:t.mode||""});default:t.type;return e}},Q=Object(u.b)({player:Z,visualizer:K});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=a(55),ee=Object(X.a)({palette:{type:"dark",background:{default:"#222222"},secondary:{light:"#ff8a50",main:"#ff5722",dark:"#c41c00",contrastText:"#000000"}}}),te=Object(u.c)(Q);o.a.render(r.a.createElement(l.a,{store:te},r.a.createElement(s.a,{theme:ee},r.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[63,1,2]]]);
//# sourceMappingURL=main.0f31f05f.chunk.js.map